{% extends 'base/main.html' %}

{% load static %}

{% block content %}

<title>{% block title%}Dipendenti{% endblock %}</title>
<link rel="stylesheet" href="{% static 'gestione/css/style.css' %}">
<script src="{% static 'gestione/js/script.js' %}"></script>


<section style="box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); margin-left:268px;">
  <header class="p-3 bg-light text-black">
      <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
      <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
          <li class="nav-link px-2 text-dark"></li>
          <li class="nav-link px-2 text-dark"><strong>{{dipendentiAttivi}}</strong> Dipendenti Attivi</li>
          <li class="nav-link px-2 text-dark"><strong>{{dipendentiCessati}}</strong> Dipendenti Cessati</li>
          <li class="nav-link px-2 text-dark"><strong>{{dipendentiSospesi}}</strong> Dipendenti Sospesi</li>
      </ul>
        <form method="POST" action="{% url 'gestione:dipendenti' %}">
          {% csrf_token %}
        <button type="submit" id="attivi" name="attivi" value="attivi" class="btn btn-success">Attivi</button>
        </form>
        <form method="POST" action="{% url 'gestione:dipendenti' %}">
          {% csrf_token %}
          <button type="submit" id="cessati" name="cessati" value="cessati" class="btn btn-danger">Cessati</button>
        </form>
        <form method="POST" action="{% url 'gestione:dipendenti' %}">
          {% csrf_token %}
          <button type="submit" id="sospesi" name="sospesi" value="sospesi" class="btn btn-warning" style="margin-right:15px;">Sospesi</button>
        </form>
      <form method="POST" action="{% url 'gestione:dipendenti' %}" class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3">
        {% csrf_token %}
          <input type="input" name="getDip" id="getDip" class="form-control form-control-dark" placeholder="Search..." aria-label="Search">
      </form>
  </header>
</section>

<section style="margin-top:50px; margin-left:280px; float:right;">
  <div class="cartaBox-table-reception-datatables">
      <div class="carta-table-reception-datatables">
          <div>
              <div class="numbers">{{dipendenti|length}}</div>
              <table class="table table-striped table-hover caption-top" id="reception-datas">
                <caption>Dipendenti</caption>
                  <thead>
                      <tr>
                        <th scope="col"></th>
                        <th scope="col">Dipendente </th>
                        <th scope="col">Area</th>
                        <th scope="col">Societ&#224;</th>
                        <th scope="col">Sede</th>
                        <th scope="col">Tipo Contratto</th>
                        <th scope="col">Scadenza Contratto</th>
                      </tr>
                  </thead>
                  {% for dipendente in dipendenti %}
                  <tr>
                  <th scope="col">
                      <div class="dropdown">
                        <a href="#" class="d-flex align-items-center link-dark text-decoration-none dropdown-toggle" id="dropdownUser2" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-plus-square-fill"></i>
                        </a>
                            <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser2">
                              <li><a class="dropdown-item" onclick="openModalStato('{% url 'gestione:update-stato' dipendente.pk %}')">Cambia Stato</a></li>
                              <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="{% url 'gestione:update-anagrafica' dipendente.pk %}">Modifica Anagrafica</a></li>
                        </ul>
                      </div>
                  </th>
                  <td>{{dipendente.nominativo}}</td>    
                  <td>{% if dipendente.area %} {{dipendente.area|title}} {% endif %}</td>
                  <td>{% if dipendente.societa %} {{dipendente.societa|title}} {% endif %}</td>
                  <td>{% if dipendente.sede %} {{dipendente.sede|title}} {% endif %}</td>
                  <td>{% if dipendente.tipo_contratto %} {{dipendente.tipo_contratto|title}} {% endif %}</td>
                  <td>{% if dipendente.data_fine_rap %} {{dipendente.data_fine_rap|date:'d-m-Y'}} {% endif %}</td>
                </tr>
                  {% endfor %}
              </table>
          </div>
          <div class="iconBox">
              <svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" fill="currentColor" class="bi bi-people-fill" viewBox="0 0 16 16">
                  <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216ZM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>
              </svg>
          </div>
          </a>
          <a href="{% url 'gestione:anagrafica-dipendente' %}">
            <svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" fill="currentColor" class="bi bi-person-fill-add" viewBox="0 0 16 16">
                <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0Zm-2-6a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/>
                <path d="M2 13c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4Z"/>
            </svg>
        </a>
      </div>
  </div> 
</section>

<div class="modal fade" id="openModalStato" role="dialog" tabindex="-1">
</div>

<script>
    var $ = jQuery.noConflict();
function openModalStato(url){
    $('#openModalStato').load(url,function(){
    $(this).modal('show'); 
    });
};

</script>
    

{% endblock content %}
