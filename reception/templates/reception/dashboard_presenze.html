{% extends "base/main.html" %}

{% load static %}

{% block content %}

<title>{% block title%}Dashboard Presenze{% endblock %}</title>
<link rel="stylesheet" href="{% static 'users/css/style.css' %}">
<script src="{% static 'users/js/script.js' %}"></script>

<section style="box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2); margin-left:268px;">
    <header class="p-3 bg-light text-black">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
    
        <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
            <li class="nav-link px-2 text-dark"></li>
            <li class="nav-link px-2 text-dark"><strong>{{attivi}}</strong> Dipendenti Presenti</li>
            <li class="nav-link px-2 text-dark"><strong>{{assenti}}</strong> Assenti</li>
            <li class="nav-link px-2 text-dark"><strong>{{inpermesso}}</strong> In Permesso</li>
            <li class="nav-link px-2 text-dark"><strong>{{inferie}}</strong> In Permesso</li>
        </ul>
    
        <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3">
            <input type="search" class="form-control form-control-dark" placeholder="Search..." aria-label="Search">
        </form>
    </header>
</section>

<section style="margin-top:50px; margin-left:280px; float:right;">
    <div class="cartaBox">
        <div class="carta">
            <div>
                <a href="{% url 'reception:presenze' %}">
                <div class="numbers">{{data}}</div>
                    <div class="cartaName">Presenze per giorno</div>
            </div>
                <div class="iconBox">
                    <svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" fill="currentColor" class="bi bi-calendar-day" viewBox="0 0 16 16">
                        <path d="M4.684 11.523v-2.3h2.261v-.61H4.684V6.801h2.464v-.61H4v5.332h.684zm3.296 0h.676V8.98c0-.554.227-1.007.953-1.007.125 0 .258.004.329.015v-.613a1.806 1.806 0 0 0-.254-.02c-.582 0-.891.32-1.012.567h-.02v-.504H7.98v4.105zm2.805-5.093c0 .238.192.425.43.425a.428.428 0 1 0 0-.855.426.426 0 0 0-.43.43zm.094 5.093h.672V7.418h-.672v4.105z"/>
                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                    </svg>
                    </div>
            </a>
            </div>
            
            <div class="carta">
                <div>
                    <a href="{% url 'reception:presenze_per_dip' %}">
                    <div class="numbers">{{numDipendenti}}</div>
                    <div class="cartaName">Presenze per dipendente</div>
                </div>
                <div class="iconBox">
                    <svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" fill="currentColor" class="bi bi-people-fill" viewBox="0 0 16 16">
                        <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216ZM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>
                    </svg>
                </div>
            </a>
            </div>
    
            <div class="carta">
                <div>
                    <div class="numbers"></div>
                    <div class="cartaName">Vai alla dashboard Mensile</div>
                </div>
                <div class="iconBox">
                    <a href="{% url 'reception:presenze_mese' %}" data-bs-toggle="tooltip" data-bs-title="Dashboard Mensile">
                    <svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" fill="currentColor" class="bi bi-speedometer" viewBox="0 0 16 16">
                        <path d="M8 2a.5.5 0 0 1 .5.5V4a.5.5 0 0 1-1 0V2.5A.5.5 0 0 1 8 2zM3.732 3.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 8a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 8zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 7.31A.91.91 0 1 0 8.85 8.569l3.434-4.297a.389.389 0 0 0-.029-.518z"/>
                        <path fill-rule="evenodd" d="M6.664 15.889A8 8 0 1 1 9.336.11a8 8 0 0 1-2.672 15.78zm-4.665-4.283A11.945 11.945 0 0 1 8 10c2.186 0 4.236.585 6.001 1.606a7 7 0 1 0-12.002 0z"/>
                    </svg>
                    </a>
                </div>
            </div>

            <div class="carta-table-reception">
                <div>
                    <div class="numbers"></div>
                    <div class="no-hover">
                    <table class="table table-striped table-hover caption-top">
                        <caption>Scarica Reports</caption>
                        <thead>
                        <tr>
                            <th scope="col"></th>
                            <td>Periodo</td>
                            <td>Scarica</td>
                        </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="col">Scegli Mese</th>
                            <td><form method="post" action="{% url 'reception:download_excel' %}">
                                {% csrf_token %}
                                <select class="form-select" aria-label="Default select example" name="mese">
                                    <option id="mese" name="mese" selected>Scegli il mese</option>
                                    <option id="1" name="Gennaio" value="1">Gennaio</option>
                                    <option id="2" name="Febbraio" value="2">Febbraio</option>
                                    <option id="3" name="Marzo" value="3">Marzo</option>
                                    <option id="4" name="Aprile" value="4">Aprile</option>
                                    <option id="5" name="Maggio" value="5">Maggio</option>
                                    <option id="6" name="Giugno" value="6">Giugno</option>
                                    <option id="7" name="Luglio" value="7">Luglio</option>
                                    <option id="8" name="Agosto" value="8">Agosto</option>
                                    <option id="9" name="Settembre" value="9">Settembre</option>
                                    <option id="10" name="Ottobre" value="10">Ottobre</option>
                                    <option id="11" name="Novembre" value="11">Novembre</option>
                                    <option id="12" name="Dicembre" value="12">Dicembre</option>
                            </select>
                            </td>
                            <td><button type="input" class="btn btn-primary">Scarica</button></td>
                            </td>
                        </form>
                            </tr>
                            <tr>
                                <th scope="col">Mese Corrente</th>
                            <td><form method="post" action="{% url 'reception:download_excel_mese_corrente' %}">
                                {% csrf_token %}
                            </td>
                            <td><button type="input" name="mese-corrente" value="mese-corrente" class="btn btn-success">Scarica</button>
                            </td>
                        </form>
                            </tr>
                            <tr>
                                <th scope="col">Settimana Corrente</th>
                            <td><form method="post" action="{% url 'reception:download_excel_settimana_corrente' %}">
                                {% csrf_token %}     
                            </td>
                            <td><button type="input" name="settimana-corrente" value="settimana-corrente" class="btn btn-primary">Scarica</button></td>
                            </form>
                            </tr>
                            <tr>
                                <th scope="col">Per Dipendente</th>
                            <td><form method="post" action="{% url 'users:scarica_report_entrate' %}">
                                {% csrf_token %}
                                <select class="form-select" aria-label="Default select example" name="dipendente">
                                    {% for dip in dipendenti %}
                                    <option id="dipendente" name="dipendente" value="{{dip.0}}">{{dip.1|title}} {{dip.2|title}}</option>
                                    {% endfor %}
                            </select>    
                            </td>
                            <td><button type="input" name="dipendenti" value="dipendente" class="btn btn-success">Scarica</button></td>
                            </form>
                            </tr>
                        </tbody>
                        </tbody>
                    </table>
                </div>
                </div>
                <div class="iconBox">
                    <svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" fill="currentColor" class="bi bi-calendar-range" viewBox="0 0 16 16">
                        <path d="M9 7a1 1 0 0 1 1-1h5v2h-5a1 1 0 0 1-1-1zM1 9h4a1 1 0 0 1 0 2H1V9z"/>
                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                    </svg>
                </div>
            </div>

            <div class="carta-table-reception">
                <div>
                    <div class="numbers">{{attivi}}/{{tutti}}</div>
                    <div class="no-hover">
                    <table class="table table-striped table-hover caption-top">
                        <caption>Presenze oggi</caption>
                        <thead>
                        <tr>
                            <th scope="col">Sede</th>
                            <td> Presenti</td>
                            <td> Assenti </td>
                            <td> In Permesso </td>
                            <td> In Ferie </td>
                            <td> Non Badgiato </td>
                        </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="col">Ariano</th>
                            <td>{{attiviAriano}}</td>    
                            <td>{{assentiAriano}}</td>    
                            <td>{{inPermessoAriano}}</td>    
                            <td>{{inFerieAriano}}</td>    
                            <td>{{nonBadgiatoAriano}}</td>    
                            </tr>
                            <tr>
                                <th scope="col">Bagnoli</th>
                            <td>{{attiviBagnoli}}</td>    
                            <td>{{assentiBagnoli}}</td>    
                            <td>{{inPermessoBagnoli}}</td>    
                            <td>{{inFerieBagnoli}}</td>    
                            <td>{{nonBadgiatoBagnoli}}</td>    
                            </tr>
                            <tr>
                                <th scope="col">Medina</th>
                            <td>{{attiviMedina}}</td>    
                            <td>{{assentiMedina}}</td>    
                            <td>{{inPermessoMedina}}</td>    
                            <td>{{inFerieMedina}}</td>    
                            <td>{{nonBadgiatoMedina}}</td>    
                            </tr>
                            <tr>
                                <th scope="col">Nato</th>
                            <td>{{attiviNato}}</td>    
                            <td>{{assentiNato}}</td>    
                            <td>{{inPermessoNato}}</td>    
                            <td>{{inFerieNato}}</td>    
                            <td>{{nonBadgiatoNato}}</td>    
                            </tr>
                            <tr>
                                <th scope="col">Campi</th>
                            <td>{{attiviCampi}}</td>    
                            <td>{{assentiCampi}}</td>    
                            <td>{{inPermessoCampi}}</td>    
                            <td>{{inFerieCampi}}</td>    
                            <td>{{nonBadgiatoCampi}}</td>    
                            </tr>
                        </tbody>
                        </tbody>
                    </table>
                </div>
                </div>
                <div class="iconBox">
                    <svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" fill="currentColor" class="bi bi-calendar-day-fill" viewBox="0 0 16 16">
                        <path d="M4 .5a.5.5 0 0 0-1 0V1H2a2 2 0 0 0-2 2v1h16V3a2 2 0 0 0-2-2h-1V.5a.5.5 0 0 0-1 0V1H4V.5zM16 14a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5h16v9zm-4.785-6.145a.428.428 0 1 0 0-.855.426.426 0 0 0-.43.43c0 .238.192.425.43.425zm.336.563h-.672v4.105h.672V8.418zm-6.867 4.105v-2.3h2.261v-.61H4.684V7.801h2.464v-.61H4v5.332h.684zm3.296 0h.676V9.98c0-.554.227-1.007.953-1.007.125 0 .258.004.329.015v-.613a1.806 1.806 0 0 0-.254-.02c-.582 0-.891.32-1.012.567h-.02v-.504H7.98v4.105z"/>
                    </svg>
                </div>
            </div>

            <div class="carta-table-reception">
                <div>
                    <div class="numbers"></div>
                    <div class="no-hover">
                    <table class="table table-striped table-hover caption-top">
                        <caption>Scarica QR</caption>
                        <thead>
                            <tr>
                                <th scope="col">Per Dipendente</th>
                            <td><form method="post" action="{% url 'reception:makeqr-uuid' %}">
                                {% csrf_token %}
                                <select class="form-select" aria-label="Default select example" name="dipendente">
                                    {% for dip in dipendenti %}
                                    <option id="dipendente" name="dipendente" value="{{dip.0}}" selected>{{dip.1|title}} {{dip.2|title}}</option>
                                    {% endfor %}
                            </select>    
                            </td>
                            <td><button type="input" name="qr-code" value="qr-code" class="btn btn-success">Scarica</button></td>
                            </form>
                            </tr>
                        </tbody>
                        </tbody>
                    </table>
                </div>
                </div>
                <div class="iconBox">
                    <svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" fill="currentColor" class="bi bi-qr-code-scan" viewBox="0 0 16 16">
                        <path d="M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0v-3Zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5ZM.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5Zm15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5ZM4 4h1v1H4V4Z"/>
                        <path d="M7 2H2v5h5V2ZM3 3h3v3H3V3Zm2 8H4v1h1v-1Z"/>
                        <path d="M7 9H2v5h5V9Zm-4 1h3v3H3v-3Zm8-6h1v1h-1V4Z"/>
                        <path d="M9 2h5v5H9V2Zm1 1v3h3V3h-3ZM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8H8Zm2 2H9V9h1v1Zm4 2h-1v1h-2v1h3v-2Zm-4 2v-1H8v1h2Z"/>
                        <path d="M12 9h2V8h-2v1Z"/>
                    </svg>
                </div>
            </div>

    </div>    
</section>
{% endblock content %}